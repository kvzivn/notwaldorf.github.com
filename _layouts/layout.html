---
layout: body
---
<nav class="sidebar">
  <ul>
    <li id="home_link"><a href="/">&lt;&lt;</a></li>
    <li><a href="/about">about</a></li>
    <li><a href="/weaknotes">weaknotes</a></li>
    <li><a href="/blog">posts</a></li>
    <li><a href="/projects">projects</a></li>
    <li><a href="/talks">talks</a></li>
    <li><a href="https://meownica.studio">shop</a></li>
  </ul>
</nav>

<style>
  #ok_paths {
    flex-shrink: 0;
    flex-grow: 1;
    min-width: 400px;
    min-height: 400px;
    height: 100%;
    white-space: pre;
  }
</style>

{% if page.splashtitle %}
<div class="splash">
  <!-- <span class="blob blob1"></span>
  <span class="blob blob2"></span>
  <span class="blob blob3"></span> -->

  <div class="horizontal">
    <div>
      <h1>{{page.splashtitle}}</h1>
      <p>{{page.splashbyline}}</p>
    </div>
    <div id="ok_paths"></div>
  </div>
</div>
{% endif %}

<section class="content">
  {{ content }}
</section>

<div class="footer">
  TODO
</div>

<script src="https://cdn.jsdelivr.net/npm/p5@1.3.0/lib/p5.min.js"></script>
<script>
  new p5(blobby, document.getElementById('ok_paths'));

  function blobby(p) {
    let t;
    let radius;
    let center;
    const numPoints = 800;
    
    p.setup = function() {
      const rekt = document.getElementById('ok_paths').getBoundingClientRect();
      const minSize = Math.min(rekt.width, rekt.height);
      radius = 0.6 * minSize;
      if (rekt.width == rekt.height) {
        center = [rekt.width/2, rekt.height/2];
      } else if (rekt.width > minSize) {
        center = [rekt.width/2 + (rekt.width-minSize)/2, rekt.height/2];
      } else {
        center = [rekt.width / 2, rekt.height/2 + (rekt.height-minSize)/2];
      }
      p.createCanvas(rekt.width, rekt.height);
      p.stroke('rgba(50, 69, 146, 0.2)');
      //p.stroke('rgba(6, 46, 21, 0.2)');
      p.noFill();
      t = 0;
    }

    p.draw = function() {
      
      // Center the drawing.
      p.translate(...center);
      p.beginShape();

      let firstPoint;
      for (let i = 0; i < numPoints; i++) {
        const ang = p.map(i, 0, numPoints, 0, p.TWO_PI);
        const rad = radius * p.noise(i * 0.01, t * 0.005);
        const x = rad * p.cos(ang);
        const y = rad * p.sin(ang);
        if (i === 0) firstPoint = [x,y];
        p.curveVertex(x, y);
      }
      p.curveVertex(...firstPoint);
      p.endShape(p.CLOSE);
      t += 1;

      // Stop at some point.
      if (p.frameCount % 400 == 0) {
        p.noLoop();
      }
    }
  }
</script>